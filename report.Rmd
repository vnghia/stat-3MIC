---
fontsize: 12pt
classoption: xcolor = usenames,dvipsnames
output:
  bookdown::pdf_document2:
    fig_caption: true
    highlight: tango
    keep_tex: true
    number_sections: true
    pandoc_args: --listings
    toc_depth: 3
    latex_engine: xelatex
    includes:
      in_header: preamble.tex
      before_body: title.sty
---

```{r include=FALSE}
library(scales)
library(e1071)
library(BioStatR)
knitr::opts_chunk$set(echo = TRUE)
options(width=80)
```

# Statistiques descriptives unidimensionnelle et bidimensionnelle
## La nature des jeux de données
### Des jeux de données
Ces jeux de données se composent de 10000 chansons extraites de la base de données Spotify. 
Chaque ligne contient 11 variables statistiques comme suit:

- `year`: année de sortie du morceau,
- `acousticness`: métrique relative interne de l’acoustique morceau,
- `duration`: durée du morceau en millisecondes (ms),
- `energy`: métrique relative interne de l’intensité, des rythmes du morceau,
- `explicit`: vaut 1 si le morceau contient des vulgarités, et 0 sinon,
- `key`: tonalité en début de morceau,
- `liveness`: proportion du morceau où l’on entend un public,
- `loudness`: mesure relative du volume du morceau (en décibels, dB)
- `mode`: mode du morceau (0 si la tonalité est mineure, et 1 si la tonalité est majeure),
- `tempo`: le tempo du morceau, en battement par minute (bpm),
- `pop.class`: la popularité du morceau.

### Des variables statistiques
Ici, nous précisons la nature de chaque variable et son format dans R.

|Nom de variable statistique| Type de variable| Format dans R |
|--|--|--:|
|`year`|qualitative ordinale|`integer`|
|`acousticness`|quantitative continue|`numeric`|
|`duration`|quantitative continue[^duration_quantitative_continue]|`numeric`|
|`energy`|quantitative continue|`numeric`|
|`explicit`|qualitative nominale|`logical`|
|`key`|qualitative nominale|`factor`|
|`liveness`|quantitative continue|`numeric`|
|`loudness`|quantitative continue|`numeric`|
|`mode`|qualitative nominale[^mode_logical]|`logical`|
|`tempo`|quantitative continue|`numeric`|
|`pop.class`|qualitative ordinale|`factor`|

[^duration_quantitative_continue]: On choisi son nature est de quantitative continue parce que.
[^mode_logical]: On pose `FALSE` si la tonalité est mineure et `TRUE` si non.

<!-- TODO(vnvo2409): Explain why [^1] --> 

### Charger les jeux de données dans R
```{r}
LoadDataset <- function(fname) {
    colclasses <- c(
        "integer", "numeric", "numeric",
        "numeric", "integer", "factor", "numeric",
        "numeric", "integer", "numeric", "factor"
    )
    dataframe <- read.csv(fname, colClasses = colclasses)
    dataframe$explicit <- as.logical(dataframe$explicit)
    dataframe$mode <- as.logical(dataframe$mode)
    return(dataframe)
}
daf <- LoadDataset("dataset.csv")
str(daf)
```

## Analyses unidimensionnelles
### Une variable qualitative - `pop.class`
```{r}
summary(daf$pop.class)
```
Il existe 4 niveaux de popularité (modalités). Commencer par `A` est le plus populaire et décroissant avec `B`, `C`, `D`.

```{r}
pop_class_table <- table(daf$pop.class)
print(label_percent()(c(pop_class_table) / sum(pop_class_table)), quote = F)
```
```{r pop-class-table, fig.cap = "Diagramme en barre de popularité", echo = FALSE}
barplot(as.matrix(pop_class_table), horiz = T, col = rainbow(length(pop_class_table),alpha=.5), ylim=c(0, 10), legend.text = levels(daf$pop.class))
```

On peut noter que dans cet ensemble de données, la plupart des chansons ne sont pas populaires ($31,5%$).
Plus le niveau de popularité est élevé, moins les chansons peuvent atteindre ce niveau.

### Une variable quantitative - `acousticness`
#### Résumé

```{r}
summary(daf$acousticness)
```
D'après le résultat ci-dessus, on a:

- Le premier quartile $q_{0.25}$ est $0.0961$
- Le deuxième quartile $q_{0.5}$ est $0.5085$
- Le troisième quartile $q_{0.75}$ est $0.8930$

<!-- TODO(vnvo2409): Explain this result and say that a song is either acoustic or electronic. --> 
#### Distribution
```{r}
skewness(daf$acousticness)
```
Étant donné que son skewness est approximativement 0, nous pouvons conclure que 
l'ensemble de données est centré autour de sa médiane.

```{r}
kurtosis(daf$acousticness)
```
Du fait que son kurtosis est inférieur à $-1,2$ (le kurtosis de la distribution uniforme[^wiki_kurtosis_normal]),
sa distribution aura la forme d'une vallée (car la distribution uniforme est déjà une ligne).

<!-- TODO(vnvo2409): ylab isn't Fréquence. -->
```{r daf-acousticness-hist, fig.cap = "Histogramme d'acoustique des chansons", echo = FALSE}
hist(daf$acousticness, main=NULL, ylab="Fréquence", xlab="Acoustique", col="cadetblue1")
```

Vous pouvez voir toutes les caractéristiques mentionnées ci-dessus dans la figure \@ref(fig:daf-acousticness-hist).

[^wiki_kurtosis_normal]: https://en.wikipedia.org/wiki/Kurtosis#Other_well-known_distributions

## Analyses bidimensionnelles

### Entre une variable quantitative et une qualitative
Dans cette partie, nous réutiliserons et analyserons les 2 variables précédentes (`pop.class` et `acousticness`).

#### Représentation graphique
```{r daf-acousticness-popclass-boxplot, fig.cap = "Boxplot parallèles de la relation entre acoustique et popularité", echo = FALSE}
boxplot(daf$acousticness ~ daf$pop.class, main=NULL, ylab="Acoustique", xlab="Popularité", outline = FALSE)
```

Notez à partir de notre graphique, les cases varient d'un facteur à l'autre, 
nous concluons que l'acoustique et la popularité sont liées l'une à l'autre.

De plus, $75\%$ des chansons populaires ont une acoustique inférieure à $0,5$ tandis que celle de presque $100\%$ des chansons les moins populaires est supérieure à $0,5$. 
De l'autre côté, selon la partie précédente, la distribution des chansons avec l'acoustique est symétrique autour de sa médiane (ce qui indique qu'il y a presque le même nombre de chansons de 2 types). 
Il est démontrable que les gens aiment les chansons électroniques.

#### Indice de liaison
```{r}
eta2(daf$acousticness, daf$pop.class)
```
Avec $c_{y|x} \approx 0,4$, il existe une légère relation entre deux variables.